<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gda="http://www.diamond.ac.uk/schema/gda/gda"
	xmlns:corba="http://www.diamond.ac.uk/schema/gda/corba"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	http://www.diamond.ac.uk/schema/gda/gda http://www.diamond.ac.uk/schema/gda/gda/gda-gda-1.0.xsd
	http://www.diamond.ac.uk/schema/gda/corba http://www.diamond.ac.uk/schema/gda/corba/gda-corba-1.0.xsd"
>
	<bean
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
	>
		<property name="location"
			value="file:${gda.config}/properties/java.properties" />
	</bean>
	<bean class="gda.spring.FindableNameSetterPostProcessor" />
	<bean id="GDAMetadata" class="gda.data.metadata.GdaMetadata">
		<property name="metadataEntries">
			<list>
				<bean id="instrument" class="gda.data.metadata.PropertyMetadataEntry">
					<property name="propertyName" value="gda.instrument" />
				</bean>
				<bean id="visit" class="gda.data.metadata.StoredMetadataEntry">
					<property name="value" value="sm0" />
				</bean>
				<ref bean="title" />
				<ref bean="subdirectory" />
			</list>
		</property>
	</bean>
	<bean id="title" class="gda.data.metadata.StoredScanMetadataEntry">
					<property name="value" value="" />
	</bean>
	<bean class="gda.data.metadata.MetadataBlaster" id="observableScanTitle">
		<property name="storedMetadataEntry" ref="title" />
	</bean>
	<bean id="subdirectory" class="gda.data.metadata.SubdirectoryMetadataEntry" />
	<bean class="gda.data.metadata.MetadataBlaster" id="observableSubdirectory">
		<property name="storedMetadataEntry" ref="subdirectory" />
	</bean>
	<bean id="GDAHashtable" class="gda.util.findableHashtable.FindableHashtable" />
	<bean id="SimpleServlet" class="gda.util.simpleServlet.FindableSimpleServlet" />
	<bean id="ScanDataStore" class="gda.util.simpleServlet.FindableSimpleServlet" />
	<bean id="plot_server"
		class="uk.ac.diamond.scisoft.analysis.plotserver.PlotServerBase" />
		
	<bean id="commandQueue" class="gda.commandqueue.CommandQueue" />


	<bean id="commandQueueProcessor" class = "gda.commandqueue.FindableProcessorQueue">
		<property name="queue" ref="commandQueue"/>
		<property name="startImmediately" value="true"/>
		<property name="logFilePath" value="${gda.var}/commandQueueProcessor.log"/>
	</bean>

	<bean class="uk.ac.gda.remoting.server.GdaRmiServiceExporter">
		<property name="serviceName" value="gda/commandQueueProcessor" />
		<property name="service" ref="commandQueueProcessor" />
		<property name="serviceInterface" value="gda.commandqueue.IFindableQueueProcessor" />
	</bean>
	<!--*************************************** -->
	<!-- *** NCD devices section *** -->
	<!--*************************************** -->
	<!-- -->
	<bean id="bsdiode" class="gda.device.monitor.DummyMonitor" />
	<bean id="DAServerS" class="gda.device.detector.DummyDAServer">
		<property name="local" value="true" />
	</bean>
	<bean id="DAServerW" class="gda.device.detector.DummyDAServer">
		<property name="local" value="true" />
	</bean>
	<bean id="DAServerT" class="gda.device.detector.DummyDAServer">
		<property name="local" value="true" />
	</bean>
	<bean id="SaxsMemory" class="gda.device.memory.Gdscaler">
		<property name="daServerName" value="DAServerS" />
		<property name="width" value="512" />
		<property name="height" value="512" />
		<property name="supportedDimensions">
			<list>
				<value>128</value>
				<value>256</value>
				<value>512</value>
				<value>1024</value>
				<value>2048</value>
				<value>4096</value>
				<value>8192</value>
			</list>
		</property>
		<property name="openCommand" value="gdscaler open 'saxs' 1" />
		<property name="sizeCommand" value="gdscaler get-mem-size 'saxs'" />
	</bean>
	<bean id="WaxsMemory" class="gda.device.memory.Gdscaler">
		<property name="daServerName" value="DAServerW" />
		<property name="width" value="512" />
		<property name="height" value="1" />
		<property name="openCommand" value="gdscaler open 'waxs' 1" />
		<property name="sizeCommand" value="gdscaler get-mem-size 'waxs'" />
	</bean>
	<bean id="CalibMemory" class="gda.device.memory.Scaler">
		<property name="name" value="CalibMemory" />
		<property name="daServerName" value="DAServerT" />
		<property name="width" value="9" />
		<property name="height" value="1" />
		<property name="openCommand" value="tfg open-cc" />
	</bean>
	<bean id="TimesMemory" class="gda.device.memory.GdhistTimes">
		<property name="daServerName" value="DAServerT" />
		<property name="width" value="8" />
		<property name="height" value="1" />
		<property name="openCommand" value="module open 'tfg_times' header" />
	</bean>
	<bean id="Tfg" class="gda.device.timer.Etfg">
		<!--  <property name="daServerName" value="realDAServer" /> -->
		<property name="daServerName" value="DAServerT" /> 
		<property name="showArmed" value="true" />
	</bean>
    <!--     <bean id="realDAServer" class="uk.ac.gda.server.ncd.detector.DAServer">
                <property name="host" value="i22-rapid-mem-gig" />
                <property name="port" value="1972" />
                <property name="local" value="true" />
                <property name="dataPort" value="20030" />
                <property name="startupCommands">
                        <list>
                                <value>~config2d</value>
                                <value>tfg setup-cc-mode scaler64</value>
                                <value>tfg setup-cc-chan -1 edge</value>
                        </list>
                </property>
        </bean> -->

	<bean id="Saxs" class="uk.ac.gda.server.ncd.subdetector.NcdWireDetector">
		<property name="detectorType" value="SAXS" />
		<property name="memory" ref="SaxsMemory" />
		<property name="pixelSize" value="0.000383" />
	</bean>
	<bean id="Saxs2" class="uk.ac.gda.server.ncd.subdetector.NcdWireDetector">
		<property name="detectorType" value="SAXS" />
		<property name="memory" ref="WaxsMemory" />
	</bean>

	<bean id="Waxs" class="uk.ac.gda.server.ncd.subdetector.NcdWireDetector">
		<property name="detectorType" value="WAXS" />
		<property name="memory" ref="WaxsMemory" />
	</bean>
	<bean id="Waxs2" class="uk.ac.gda.server.ncd.subdetector.NcdWireDetector">
		<property name="detectorType" value="WAXS" />
		<property name="memory" ref="SaxsMemory" />
	</bean>
	<bean id="Scaler" class="uk.ac.gda.server.ncd.subdetector.NcdWireDetector">
		<property name="detectorType" value="CALIB" />
		<property name="memory" ref="CalibMemory" />
	</bean>
	<bean id="TfgTimes" class="uk.ac.gda.server.ncd.subdetector.NcdTimesDetector">
		<property name="detectorType" value="TIMES" />
		<property name="memory" ref="TimesMemory" />
	</bean>
	<!-- <bean id="mar165" class="uk.ac.gda.server.ncd.mar.Mar165Detector"> 
		<property name="host" value="i22-mar01" /> </bean> <bean id="Mar" class="uk.ac.gda.server.ncd.subdetector.NcdMarDetector"> 
		<property name="mar" ref="mar165" /> </bean> -->
	<bean id="ncddetectors" class="uk.ac.gda.server.ncd.detectorsystem.NcdDetectorSystem">
		<property name="timer" ref="Tfg" />
		<property name="detectors">
			<list>
				<ref bean="Saxs" />
				<ref bean="Waxs" />
				<ref bean="Scaler" />
				<ref bean="TfgTimes" />
			</list>
		</property>
	</bean>
	
	<!--  <import resource="ncdsim_pilad.xml" /> -->
	
	<bean id="bragg_motor" class="gda.device.motor.DummyMotor">
	</bean>
	<bean id="bragg" class="gda.device.scannable.ScannableMotor">
		<property name="motor" ref="bragg_motor" />
		<property name="scalingFactor" value="-1" />
	</bean>
	<bean id="DCM" class="gda.device.scannable.scannablegroup.ScannableGroup">
		<property name="groupMembers">
			<list>
				<ref bean="bragg" />
			</list>
		</property>
	</bean>
	
	<bean id="shutter" class="gda.device.enumpositioner.DummyValve" />
	
	<!-- <bean id="keyence01" class="gda.device.scannable.keyence.Keyence"> 
		<property name="host" value="i22-keyence01.diamond.ac.uk" /> </bean> <bean 
		id="keyence02" class="gda.device.scannable.keyence.Keyence"> <property name="host" 
		value="i22-keyence02.diamond.ac.uk" /> </bean> -->
	<bean id="ncdlistener" class="uk.ac.gda.server.ncd.plotting.ListenerDispatcher">
		<property name="ncdDetector" ref="ncddetectors"></property>
	</bean>
	<gda:rbac />

	<bean id="bssc" class="uk.ac.gda.devices.bssc.BioSAXSSampleChanger">
		<property name="hostname" value="diamrd2336"/>
		<property name="port" value="9555"/>
	</bean>

</beans>
