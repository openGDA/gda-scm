<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

   <bean id="simcam_adbase"  class="gda.device.detector.areadetector.v17.impl.ADBaseImpl">
        <property name="basePVName" value="ws140-AD-SIM-01:CAM:" />
    </bean>

    <bean id="simcam_ndarray"  class="gda.device.detector.areadetector.v17.impl.NDArrayImpl">
        <property name="basePVName" value="ws140-AD-SIM-01:ARR:" />
        <property name="pluginBase">
            <bean class="gda.device.detector.areadetector.v17.impl.NDPluginBaseImpl">
                <property name="basePVName" value="ws140-AD-SIM-01:ARR:" />
            </bean>
        </property>
    </bean>

    <bean id="simcam_stats" class="gda.device.detector.areadetector.v17.impl.NDStatsImpl">
        <property name="basePVName" value="ws140-AD-SIM-01:STAT:" />
        <property name="pluginBase">
            <bean class="gda.device.detector.areadetector.v17.impl.NDPluginBaseImpl">
                <property name="basePVName" value="ws140-AD-SIM-01:STAT:" />
            </bean>
        </property>
    </bean>

    <bean id="simcam_ndfile" class="gda.device.detector.areadetector.v17.impl.NDFileImpl">
        <property name="basePVName" value="ws140-AD-SIM-01:HDF5:" />
        <property name="pluginBase">
            <bean class="gda.device.detector.areadetector.v17.impl.NDPluginBaseImpl">
                <property name="basePVName" value="ws140-AD-SIM-01:HDF5:" />
            </bean>
        </property>
        <property name="initialAutoSave" value="Not hooked up to anything!" />
        <property name="initialAutoIncrement" value="Not hooked up to anything!" />
        <property name="initialWriteMode" value="0" />
        <property name="initialNumCapture" value="1" />
        <property name="initialFileName" value="simcam.h5" />
        <property name="initialFileTemplate" value="%s%s%d.h5" />
    </bean>

    <bean id="simcam_roi" class="gda.device.detector.areadetector.v17.impl.NDROIImpl">
        <property name="basePVName" value="ws140-AD-SIM-01:ROI:" />
        <property name="pluginBase">
            <bean class="gda.device.detector.areadetector.v17.impl.NDPluginBaseImpl">
                <property name="basePVName" value="ws140-AD-SIM-01:ROI:" />
            </bean>
        </property>
        <property name="initialBinX" value="0" />
        <property name="initialBinY" value="0" />
        <property name="initialMinX" value="0" />
        <property name="initialMinY" value="0" />
        <property name="initialSizeX" value="1280" />
        <property name="initialSizeY" value="960" />
    </bean>

    <bean id="simcam_proc" class="gda.device.detector.areadetector.v17.impl.NDProcessImpl">
        <property name="basePVName" value="ws140-AD-SIM-01:PROC:" />
        <property name="pluginBase">
            <bean class="gda.device.detector.areadetector.v17.impl.NDPluginBaseImpl">
                <property name="basePVName" value="ws140-AD-SIM-01:PROC:" />
            </bean>
        </property>
    </bean>

    <bean id="simcam_mjpg" class="gda.device.detector.areadetector.v17.impl.FfmpegStreamImpl">
        <property name="basePVName" value="ws140-AD-SIM-01:MJPG:" />
        <property name="pluginBase">
            <bean class="gda.device.detector.areadetector.v17.impl.NDPluginBaseImpl">
                <property name="basePVName" value="ws140-AD-SIM-01:MJPG:" />
            </bean>
        </property>
    </bean>

    <bean id="simcam_overlay" class="gda.device.detector.areadetector.v17.impl.NDOverlayImpl">
        <property name="basePVName" value="ws140-AD-SIM-01:OVER:" />
        <property name="pluginBase">
            <bean class="gda.device.detector.areadetector.v17.impl.NDPluginBaseImpl">
                <property name="basePVName" value="ws140-AD-SIM-01:OVER:" />
            </bean>
        </property>
    </bean>


    <bean id="simcam_hdf5" class="gda.device.detector.areadetector.v17.impl.NDFileHDF5Impl">
        <property name="basePVName" value="ws140-AD-SIM-01:HDF5:" />
        <property name="file">
            <bean class="gda.device.detector.areadetector.v17.impl.NDFileImpl">
                <property name="basePVName" value="ws140-AD-SIM-01:HDF5:" />
                <property name="pluginBase">
                    <bean class="gda.device.detector.areadetector.v17.impl.NDPluginBaseImpl">
                        <property name="basePVName" value="ws140-AD-SIM-01:HDF5:" />
                    </bean>
                </property>
                <property name="initialAutoSave" value="Not hooked up to anything!" /> <!-- currently yes -->
                <property name="initialAutoIncrement" value="Not hooked up to anything!" /> <!-- currently true -->
                <property name="initialWriteMode" value="0" /> <!-- Single(current), Capture, Stream, -->
                <property name="initialNumCapture" value="1" /> <!-- current = 1 -->
                <property name="initialFileName" value="simcam" />
                <property name="initialFileTemplate" value="%s%s%d.h5" />
            </bean>
        </property>
    </bean>

<!--     <bean id="simcam_adplugins" class="gda.device.FindableObjectHolder"> -->
<!--         <property name="map"> -->
<!--             <util:map> -->
<!--                 <entry key="simcam_adbase"  value-ref="simcam_adbase"/> -->
<!--                 <entry key="simcam_ndarray" value-ref="simcam_ndarray"/> -->
<!--                 <entry key="simcam_ndstats" value-ref="simcam_ndstats"/> -->
<!--                 <entry key="simcam_roi"     value-ref="simcam_roi"/> -->
<!--                 <entry key="simcam_proc"    value-ref="simcam_proc"/> -->
<!--                 <entry key="simcam_ffmpeg"  value-ref="simcam_ffmpeg"/> -->
<!--                 <entry key="simcam_overlay" value-ref="simcam_overlay"/> -->
<!--                 <entry key="simcam_hdf5"    value-ref="simcam_hdf5"/> -->
<!--             </util:map> -->
<!--         </property> -->
<!--     </bean> -->

	<bean id="simcam_trigger" class="gda.device.detector.addetector.triggering.HardwareTriggeredStandard">
		<constructor-arg ref="simcam_adbase" />
		<constructor-arg value=".1" />
	</bean>
	<!-- ADDetector -->
    <bean id="simcam_ad" class="gda.device.detector.addetector.HardwareTriggerableADDetector">
        <property name="adBase" ref="simcam_adbase"/>
<!--         <property name="collectionStrategy"> -->
<!--             <bean class="gda.device.detector.addetector.triggering.SingleExposureStandard"> -->
<!--                 <constructor-arg ref="simcam_adbase" /> -->
<!--                 <constructor-arg value="0.1" /> -->
<!--             </bean> -->
<!--         </property> -->
        <property name="ndFile"  ref="simcam_ndfile"/>
        <property name="ndArray" ref="simcam_ndarray"/>
        <property name="ndStats" ref="simcam_stats"/>
        <property name="fileWriter" ref="simcam_filewriter" />
        <property name="nonHardwareTriggeredCollectionStrategy" ref="simcam_nxcollectionstrategy" />
        <property name="collectionStrategy" ref="simcam_nxcollectionstrategy" />
        <property name="hardwareTriggeredCollectionStrategy" ref="simcam_trigger" />

        <property name="readArray" value="false" />
        <property name="readFilepath" value="true" />
        <property name="readAcquisitionTime" value="true" />
        <property name="readAcquisitionPeriod" value="false" />
        <property name="computeStats" value="false" />
        <property name="computeCentroid" value="false" />
        <property name="exposureCompleteWhenFileIsVisible" value="True"/>
    </bean>


	<bean id="simcam_filewriter"
		class="gda.device.detector.addetector.filewriter.MultipleImagesPerHDF5FileWriterWithNumTracker">
		<property name="ndFileHDF5" ref="simcam_hdf5" />
		<property name="fileNameTemplate" value="" />
		<property name="numTrackerExt" value="ncd" />
		<property name="filePathTemplate" value="$datadir$/" />
		<property name="fileTemplate" value="%s%s/simcam-%d.h5" />
		<property name="fileNumberAtScanStart" value="-1" />
		<property name="setFileNameAndNumber" value="true" />
	</bean>

	<!-- NXDetector collection strategies -->
	<bean id="simcam_nxcollectionstrategy" class="gda.device.detector.addetector.triggering.MultipleExposurePerCollectionStandard">
		<constructor-arg ref="simcam_adbase" />
		<constructor-arg value=".1" />
	</bean>

</beans>

